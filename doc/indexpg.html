<HTML>
<HEAD>
<TITLE>
MHonArc v1.2.2 -- Index Page Customization
</TITLE></HEAD>
<BODY>
[<A HREF=removing.html>Previous</A>][<A HREF=thread.html>Next</A>][<A HREF=mhonarc.html>Contents</A>][<A HREF="http://www.oac.uci.edu/indiv/ehood/MHonArc/faq.html">FAQ</A>][<A HREF="http://www.oac.uci.edu/indiv/ehood/MHonArc/bugs.html">Bugs</A>][<A HREF=http://www.oac.uci.edu/indiv/ehood/mhonarc.html>Home</A>]
<HR>

<H1><A NAME="30032">Index Page Customization</A>
</H1>

<P><EM>MHonArc</EM> creates an index page with links to all mail messages filtered (unless 
processing a single message with the <A HREF="overview.html#15562"><CODE>-single</CODE></A> option). <EM>MHonArc</EM> allows you to 
have complete customization over the appearance of the index page by setting 
various resource either through environment variables, command-line options, or 
the resource file.
</P>
<HR>
<H2><A NAME="MMM0">Filename
</A></H2>

<P>By default, the filename of the index page is "<CODE>maillist.html</CODE>". However, a 
different name may be specified with the <A HREF="overview.html#40918"><CODE>M2H_IDXFNAME</CODE></A> environment variable, 
the <A HREF="rcfile.html#35395"><CODE>IDXFNAME</CODE></A> resource element, or the <A HREF="overview.html#29572"><CODE>-idxfname</CODE></A> command-line option.
</P>
<HR>
<H2><A NAME="12832">Beginning Markup</A>
</H2>

<P><EM>MHonArc</EM> allows you to completely override the begining markup of the index 
page. I.e. You can control the opening &lt;HTML&gt; tag, the HEAD element contents, 
the opening &lt;BODY&gt; tag, etc. Therefore, if you are not satisfied with the default 
behavior of how the TITLE resource is used, or have other needs that require 
control on the beginning markup, you can set the <CODE>IDXPGBEGIN</CODE> resource file 
element.
</P>
<H3><CODE><A NAME="40302">IDXPGBEGIN</A></CODE> 
</H3>

<P>The best way to show how the <CODE>IDXPGBEGIN</CODE> works, the following represents the 
default setting <EM>MHonArc</EM> uses:
</P>
<PRE>&lt;IDXPGBEGIN&gt;
&lt;!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
&lt;TITLE&gt;$IDXTITLE$&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;H1&gt;$IDXTITLE$&lt;/H1&gt;
&lt;/IDXPGBEGIN&gt;

</PRE>

<DL>
<DT><STRONG>NOTE</STRONG> 

<DD><P> Technically, setting the TITLE resource, via the <A HREF="overview.html#32063"><CODE>M2H_TITLE</CODE></A> environment 
variable, the <A HREF="rcfile.html#33814"><CODE>TITLE</CODE></A> resource element, or the <A HREF="overview.html#11204"><CODE>-title</CODE></A> command-line 
option, sets the <CODE>$IDXTITLE$</CODE> resource file variable.
</P></DL>
<P>The resource variables allowed in the <CODE>IDXPGBEGIN</CODE> element are the following:
</P>
<UL>
<LI><CODE>$DOCURL$</CODE> -- URL to documentation
<LI><CODE>$GMTDATE$</CODE> -- Current GMT date.
<LI><CODE>$IDXFNAME$</CODE> -- Filename of main index page.
<LI><CODE>$IDXSIZE$</CODE> -- Max number of messages that may be listed in the index.
<LI><CODE>$IDXTITLE$</CODE> -- The title of the index page.
<LI><CODE>$LOCALDATE$</CODE> -- Current local date.
<LI><CODE>$NUMOFIDXMSG$</CODE> -- Number of message listed.
<LI><CODE>$NUMOFMSG$</CODE> -- Number of messages in the archive.
<LI><CODE>$OUTDIR$</CODE> -- Pathname of archive.
<LI><CODE>$PROG$</CODE> -- Program name.
<LI><CODE>$TIDXFNAME$</CODE> -- Filename of thread index page.
<LI><CODE>$TIDXTITLE$</CODE> -- Title of thread index page.
<LI><CODE>$VERSION$</CODE> -- Program version.
</UL>
<P>See <A HREF="rcfile.html#33860">Resource Variables</A> for more information on the usage of variables.
</P>
<HR>
<H2><A NAME="MMM1">End Markup
</A></H2>

<P>Since <EM>MHonArc</EM> allows you to control the <A HREF="#12832">beginning markup</A>, it makes sense for it 
to allow you to control the ending markup.
</P>
<H3><CODE><A NAME="16017">IDXPGEND</A></CODE> 
</H3>

<P>The <CODE>IDXPGEND</CODE> resource element may be used to define the ending markup of the 
index page. The default value is the following:
</P>
<PRE>&lt;IDXPGEND&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;
&lt;/IDXPGEND&gt;

</PRE>

<P>The resource variables allowed are the same as for <A HREF="#40302"><CODE>IDXPGBEGIN</CODE></A>.
</P>
<HR>
<H2><A NAME="39385">Include Files</A>
</H2>

<P><EM>MHonArc</EM> allows you to include the contents of files into the index page via the 
header and footer resources.
</P>
<DL>
<DT><STRONG>NOTE</STRONG> 

<DD><P> The use of include files is discouraged since the <A HREF="#33994"><CODE>LISTBEGIN</CODE></A> and <A HREF="#21268"><CODE>LISTEND</CODE></A> 
resources can be used to achieve the same results. Also, the support for the 
include resource may be removed in future releases.
</P></DL>
<P>The header file is specified via the <A HREF="overview.html#21061"><CODE>M2H_HEADER</CODE></A> environment variable, the 
<A HREF="rcfile.html#12591"><CODE>HEADER</CODE></A> resource element, or the <A HREF="overview.html#39268"><CODE>-header</CODE></A> command-line option. The contents of 
the header file are inserted above the message listing, and right after the <CODE>H1</CODE> title 
element.
</P>
<DL>
<DT><STRONG>NOTE</STRONG> 

<DD><P> <VAR>Filename</VAR> should not contain the <CODE>&lt;HTML&gt;</CODE>, <CODE>&lt;HEAD&gt;</CODE>, and <CODE>&lt;BODY&gt;</CODE> tags; these 
tags are automatically provided by <EM>MHonArc</EM>, or defined by the 
<A HREF="#40302"><CODE>IDXPGBEGIN</CODE></A> resource file element.
</P></DL>
<P>The footer file is specified via the <A HREF="overview.html#18889"><CODE>M2H_FOOTER</CODE></A> environment variable, the <A HREF="rcfile.html#28184"><CODE>FOOTER</CODE></A> 
resource element, or the <A HREF="overview.html#21527"><CODE>-footer</CODE></A> command-line option. The contents of the footer 
file are inserted after the message listing.
</P>
<DL>
<DT><STRONG>NOTE</STRONG> 

<DD><P> <VAR>Filename</VAR> should not contain the <CODE>&lt;/BODY&gt;</CODE>, and <CODE>&lt;/HTML&gt;</CODE> tags; these tags 
are automatically provided by <EM>MHonArc</EM>, or defined by the <A HREF="#16017"><CODE>IDXPGEND</CODE></A> 
resource file element.
</P></DL>
<P>The header and footer files allow you to incorporate search-forms, hyperlinks to 
other pages, or any other HTML markup you like.
</P>
<P>It is only necessary to specify the header and/or footer files the first time you create 
an archive. The contents included from the header and/or footer files are 
preserved in any subsequent additions to the archive. Only respecify the header 
and/or footer files if you need to make changes to the header/footer contents.
</P>
<HR>
<H2><A NAME="18820">Listing Layout</A>
</H2>

<P><EM>MHonArc</EM> lists messages in the order specified by the various sort options. 
However, you have complete control on how the message listing are formatted via 
the <CODE>LISTBEGIN</CODE>, <CODE>LITEMPLATE</CODE>, and <CODE>LISTEND</CODE> resource elements in the <A HREF="rcfile.html#21846">Resource 
File</A>. These elements allow you to specify the HTML markup to use in the index 
page.
</P>
<H3><CODE><A NAME="33994">LISTBEGIN</A></CODE> 
</H3>

<P>The <CODE>LISTBEGIN</CODE> resource element specifies the text to begin the message list. The 
text can be any valid HTML markup. Plus, <EM>MHonArc</EM> defines the following 
variables you may use which get expanded at run-time:
</P>
<UL>
<LI><CODE>$DOCURL$</CODE> -- URL to documentation
<LI><CODE>$GMTDATE$</CODE> -- Current GMT date.
<LI><CODE>$IDXFNAME$</CODE> -- Filename of main index page.
<LI><CODE>$IDXSIZE$</CODE> -- Max number of messages that may be listed in the index.
<LI><CODE>$IDXTITLE$</CODE> -- The title of the index page.
<LI><CODE>$LOCALDATE$</CODE> -- Current local date.
<LI><CODE>$NUMOFIDXMSG$</CODE> -- Number of message listed.
<LI><CODE>$NUMOFMSG$</CODE> -- Number of messages in the archive.
<LI><CODE>$OUTDIR$</CODE> -- Pathname of archive.
<LI><CODE>$PROG$</CODE> -- Program name.
<LI><CODE>$TIDXFNAME$</CODE> -- Filename of thread index page.
<LI><CODE>$TIDXTITLE$</CODE> -- Title of thread index page.
<LI><CODE>$VERSION$</CODE> -- Program version.
</UL>
<P><EM>MHonArc</EM>'s <CODE>LISTBEGIN</CODE> default value is the following:
</P>
<PRE>&lt;LISTBEGIN&gt;
&lt;UL&gt;
&lt;LI&gt;&lt;A HREF="$TIDXFNAME$"&gt;Thread Index&lt;/A&gt;&lt;/LI&gt;
&lt;/UL&gt;
&lt;HR&gt;
&lt;UL&gt;
&lt;/LISTBEGIN&gt;

</PRE>

<P>If the NOTHREAD resource is set, the following is the default value:
</P>
<PRE>&lt;LISTBEGIN&gt;
&lt;HR&gt;
&lt;UL&gt;
&lt;/LISTBEGIN&gt;

</PRE>

<H3><CODE><A NAME="26878">LITEMPLATE</A></CODE> 
</H3>

<P>The <CODE>LITEMPLATE</CODE> resoure element defines the HTML text to represent each 
message list item. You may use the following variables which are expanded at 
runtime:
</P>
<UL>
<LI><CODE>$A_ATTR$</CODE> -- The <CODE>NAME</CODE> and <CODE>HREF</CODE> attributes to use in an anchor to link to 
the archived message. The <CODE>NAME</CODE> attribute links the messages to the index 
page.
<LI><CODE>$A_HREF$</CODE> -- The <CODE>HREF</CODE> attribute to use in an anchor to link to the archived 
message.
<LI><CODE>$A_NAME$</CODE> -- The <CODE>NAME</CODE> attributes to use in an anchor for messages to link 
to the index page.
<LI><CODE>$DATE$</CODE> -- The date of the message.
<LI><CODE>$DDMMYY$</CODE> -- Message date in dd/mm/yy format.
<LI><CODE>$ICON$</CODE> -- The context-type sensistive icon. See <A HREF="#20837">Icons</A> for information.
<LI><CODE>$ICONURL$</CODE> -- The URL to the context-type sensistive icon. See <A HREF="#20837">Icons</A> for 
information.
<LI><CODE>$MMDDYY$</CODE> -- Message date in mm/dd/yy format.
<LI><CODE>$NUMFOLUP$</CODE> -- Number of follow-ups for the given message.
<LI><CODE>$FROM$</CODE> -- The complete text in the <CODE>From:</CODE> field of the message.
<LI><CODE>$FROMADDR$</CODE> -- The e-mail address in the <CODE>From:</CODE> field of the message.
<LI><CODE>$FROMNAME$</CODE> -- The English name of the person in the <CODE>From:</CODE> field of the 
message. If no English name is found, the username specified in the e-mail 
address is used.
<LI><CODE>$MSGNUM$</CODE> -- The message numbers assigned to the message by <EM>MHonArc</EM>.
<LI><CODE>$ORDNUM$</CODE> -- The current listing number of the message.
<LI><CODE>$SUBJECT$</CODE> -- The subject text of the message wrapped in an anchor 
element that hyperlinks to the message.
<LI><CODE>$SUBJECTNA$</CODE> -- The subject text of the message without the anchor 
element.
<LI><CODE>$YYMMDD$</CODE> -- Message date in yy/mm/dd format.
</UL>
<P>
</P>
<DL>
<DT><STRONG>NOTE</STRONG> 

<DD><P> Do not specify <CODE>$A_ATTR$</CODE>, <CODE>$A_NAME</CODE>, and <CODE>$SUBJECT$</CODE> together in the 
<CODE>LITEMPLATE</CODE> element. Since all of these variables contain the <CODE>NAME</CODE> 
atrribute. Invalid HTML will be created since multiple anchors will have 
the same <CODE>NAME</CODE> identifier.
</P></DL>
<P><CODE>LITEMPLATE</CODE>'s default value is the following:
</P>
<PRE>&lt;LITEMPLATE&gt; 
&lt;LI&gt;&lt;STRONG&gt;$SUBJECT$&lt;/STRONG&gt; 
&lt;UL&gt;&lt;LI&gt;&lt;EM&gt;From&lt;/EM&gt;: $FROM$&lt;/LI&gt;&lt;/UL&gt; 
&lt;/LI&gt; 
&lt;/LITEMPLATE&gt; 

</PRE>

<H3><CODE><A NAME="21268">LISTEND</A></CODE> 
</H3>

<P>The <CODE>LISTEND</CODE> resource element specifies the text to use to end the message list. The 
text can be any valid HTML markup. <CODE>LISTEND</CODE> may contain the same variables as 
<A HREF="#33994"><CODE>LISTBEGIN</CODE></A>.
</P>
<P><CODE>LISTEND</CODE>'s default value is the following:
</P>
<PRE>&lt;LISTEND&gt; 
&lt;/UL&gt; 
&lt;/LISTEND&gt; 

</PRE>

<HR>
<H2><A NAME="20837">Icons</A>
</H2>

<P><EM>MHonArc</EM> supports the ability to insert icons in the index page for each message 
based on the message's content-type. For example: You can have text/plain 
messages use a different icon than text/html messages.
</P>
<H3>Defining Icons
</H3>

<P>To specify the icons for <EM>MHonArc</EM> to use, you use the <CODE>ICONS</CODE> resource element in 
the <A HREF="rcfile.html#21846">Resource File</A>. The format of each line in the <CODE>ICONS</CODE> element is as follows:
</P>
<P><EM>&lt;content-type&gt;</EM><CODE>:</CODE><EM>&lt;URL for icon&gt;</EM> 
</P>
<P><EM>&lt;content-type&gt;</EM> represents a MIME content-type. <EM>&lt;URL for icon&gt;</EM> is the URL to the 
icon. The special content-type called "<CODE>unknown</CODE>" may be defined to specify the 
icon to use for non-recognized content-types. If <CODE>unknown</CODE> is not defined, the 
text/plain icon is used for unknown content types.
</P>
<H4>Example
</H4>

<PRE>&lt;ICONS&gt;
audio/basic:http://foo.org/gifs/gsound.gif
image/gif:http://foo.org/gifs/gimage.gif
image/jpeg:http://foo.org/gifs/gimage.gif
image/tiff:http://foo.org/gifs/ggraphic.gif
multipart/alternative:http://foo.org/gifs/gmulti.gif
multipart/digest:http://foo.org/gifs/gtext.gif
multipart/mixed:http://foo.org/gifs/gdoc2.gif
multipart/parallel:http://foo.org/gifs/gdoc.gif
text/richtext:http://foo.org/gifs/gdoc.gif
text/html:http://foo.org/gifs/gdoc.gif
text/plain:http://foo.org/gifs/gletter.gif
unknown:http://foo.org/gifs/gunknown.gif
video/mpeg:http://foo.org/gifs/gmovie.gif
&lt;/ICONS&gt;

</PRE>

<H3>Using Icons
</H3>

<P>In order to incorporate icons into the index page, insert the <CODE>$ICON$</CODE> variable into 
the <A HREF="#26878"><CODE>LITEMPLATE</CODE></A> resource element.
</P>
<H4>Example
</H4>

<PRE>&lt;litemplate&gt;
$ICONURL$&lt;strong&gt;$SUBJECT:40$&lt;/strong&gt;
($NUMFOLUP$) &lt;em&gt;$FROMNAME$&lt;/em&gt;&lt;br&gt;
&lt;/litemplate&gt;

</PRE>

<P>The <CODE>$ICON$</CODE> variable expands to the <CODE>IMG</CODE> HTML element with the appropriate 
URL in the <CODE>SRC</CODE> attribute to the icon. The <CODE>ALT</CODE> attribute of the <CODE>IMG</CODE> element contains 
the content-type of the message, surrounded by <CODE>[]</CODE>'s, for use with text based 
browsers.
</P>
<P><CODE>$ICONURL$</CODE> may also be used if you want redefine the format of the <CODE>IMG</CODE> element.
</P>
<H4>Example
</H4>

<PRE>&lt;litemplate&gt;
&lt;img src="$ICONURL$" alt="* "&gt;&lt;strong&gt;$SUBJECT:40$&lt;/strong&gt;
($NUMFOLUP$) &lt;em&gt;$FROMNAME$&lt;/em&gt;&lt;br&gt;
&lt;/litemplate&gt;

</PRE>

<P>This example overrides what is normally used in the <CODE>ALT</CODE> attribute.
</P>
<HR>
<H2><A NAME="MMM2">Examples
</A></H2>

<H3>Example 1
</H3>

<P>It may be easier to see how the <CODE>LISTBEGIN</CODE>, <CODE>LITEMPLATE</CODE>, <CODE>LISTEND</CODE> resource 
elements work when declared together:
</P>
<PRE>&lt;!-- This represents the default values used by MHonArc --&gt;
&lt;LISTBEGIN&gt;
&lt;UL&gt;
&lt;LI&gt;&lt;A HREF="$TIDXFNAME$"&gt;Thread Index&lt;/A&gt;&lt;/LI&gt;
&lt;/UL&gt;
&lt;HR&gt;
&lt;UL&gt;
&lt;/LISTBEGIN&gt;

&lt;LITEMPLATE&gt; 
&lt;LI&gt;&lt;STRONG&gt;$SUBJECT$&lt;/STRONG&gt; 
&lt;UL&gt;&lt;LI&gt;&lt;EM&gt;From&lt;/EM&gt;: $FROM$&lt;/LI&gt;&lt;/UL&gt; 
&lt;/LI&gt; 
&lt;/LITEMPLATE&gt; 

&lt;LISTEND&gt; 
&lt;/UL&gt; 
&lt;/LISTEND&gt; 

</PRE>

<H3>Example 2
</H3>

<P>Here's another example that changes the layout into a more compact listing, adds 
<A HREF="#20837">Icons</A> usage, and adds a time stamp information on when the index page was last 
updated:
</P>
<PRE>&lt;listbegin&gt;
&lt;address&gt;
Last update: $CURDATE$&lt;br&gt;
$NUMOFMSG$ messages&lt;br&gt;
&lt;/address&gt;
&lt;p&gt;
&lt;UL&gt;
&lt;LI&gt;&lt;A HREF="$TIDXFNAME$"&gt;Thread Index&lt;/A&gt;&lt;/LI&gt;
&lt;/UL&gt;
&lt;p&gt;
Messages listed in chronological order.  Listing format is the following:
&lt;blockquote&gt;
&lt;img src="http://foo.org/gifs/gletter.gif" alt="* "&gt;
&lt;strong&gt;Subject&lt;/strong&gt;
(# of follow-ups)
&lt;em&gt;From&lt;/em&gt;.
&lt;/blockquote&gt;
&lt;p&gt;
&lt;hr&gt;
&lt;/listbegin&gt;

&lt;litemplate&gt;
&lt;img src="$ICONURL$" alt="* "&gt;&lt;strong&gt;$SUBJECT:40$&lt;/strong&gt;
($NUMFOLUP$) &lt;em&gt;$FROMNAME$&lt;/em&gt;&lt;br&gt;
&lt;/litemplate&gt;

&lt;listend&gt;
&lt;/listend&gt;

</PRE>


<HR>
[<A HREF=removing.html>Previous</A>][<A HREF=thread.html>Next</A>][<A HREF=mhonarc.html>Contents</A>][<A HREF="http://www.oac.uci.edu/indiv/ehood/MHonArc/faq.html">FAQ</A>][<A HREF="http://www.oac.uci.edu/indiv/ehood/MHonArc/bugs.html">Bugs</A>][<A HREF=http://www.oac.uci.edu/indiv/ehood/mhonarc.html>Home</A>]
</BODY>
</HTML>
